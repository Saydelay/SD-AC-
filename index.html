<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Cheat-Scan Ergebnis anzeigen</title>
</head>
<body>
  <h2>ðŸ”Ž Scan-Code eingeben:</h2>
  <input type="text" id="scanCode" placeholder="z.B. 7X8ZLQ2W" />
  <button onclick="searchGist()">Scan laden</button>

  <pre id="output" style="white-space: pre-wrap; border:1px solid #ccc; padding:10px; margin-top:10px;"></pre>

  <script>
    const user = "saydelay"; // GitHub Benutzername hier anpassen

    async function searchGist() {
      const code = document.getElementById("scanCode").value.trim();
      if (!code) {
        document.getElementById("output").textContent = "Bitte einen Scan-Code eingeben.";
        return;
      }

      document.getElementById("output").textContent = "Suche nach Gistâ€¦";

      try {
        // max 100 Gists vom Nutzer laden
        const res = await fetch(`https://api.github.com/users/${user}/gists?per_page=100`);
        if (!res.ok) {
          document.getElementById("output").textContent = "Fehler beim Laden der Gists.";
          return;
        }
        const gists = await res.json();

        // Gist suchen, dessen Beschreibung genau den Code enthÃ¤lt (z.B. "CheatScan-7X8ZLQ2W")
        const gist = gists.find(g => g.description && g.description.includes(code));

        if (!gist) {
          document.getElementById("output").textContent = "Kein Scan mit diesem Code gefunden.";
          return;
        }

        // Inhalt der ersten Datei im Gist laden
        const fileKey = Object.keys(gist.files)[0];
        const content = gist.files[fileKey].content;

        document.getElementById("output").textContent = content;

      } catch (e) {
        document.getElementById("output").textContent = "Fehler: " + e.message;
      }
    }
  </script>
</body>
</html>
